<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>연말 할인 주문서</title>

<style>
  body {
    font-family: 'Noto Sans KR', sans-serif;
    margin: 0;
    padding: 30px;
    background: #F7F7F7;
    display: flex;
    justify-content: center;
  }
  .page-wrapper {
    max-width: 1200px;
    width: 100%;
    background: #fff;
    padding: 40px;
    border-radius: 8px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.06);
    box-sizing: border-box;
  }
  h1 {
    text-align: center;
    font-size: 2em;
    color: #2c3e50;
    margin-bottom: 10px;
  }
  h4 {
    text-align: center;
    color: #555;
    font-weight: 400;
    margin-top: 0;
    margin-bottom: 30px;
    line-height: 1.6;
  }
  .info-line {
    text-align: center;
    font-size: 0.95em;
    color: #666;
    line-height: 1.5;
  }

  h2 {
    margin-top: 40px;
    font-size: 1.2em;
    border-left: 3px solid #b0c4de;
    padding-left: 10px;
    color: #2c3e50;
  }

  .category-title {
    font-size: 1.05em;
    font-weight: 600;
    margin-top: 25px;
    padding-bottom: 5px;
    border-bottom: 1px solid #e2e2e2;
    color: #222;
  }

  label {
    display: block;
    margin: 16px 0 6px;
    font-weight: 500;
    font-size: 0.95em;
  }

  input[type="text"],
  input[type="email"],
  input[type="number"],
  select {
    width: 100%;
    padding: 10px 0;
    border: none;
    border-bottom: 1px solid #ccc;
    font-size: 1em;
    background: transparent;
  }
  input:focus, select:focus {
    outline: none;
    border-bottom: 1px solid #2c3e50;
  }

  /* 상품 선택 2단 레이아웃 */
  .flex-container {
    display: flex;
    gap: 30px;
    margin-top: 25px;
  }
  .product-side {
    width: 40%;
    border-right: 1px solid #eee;
    padding-right: 20px;
  }
  .preview-side {
    width: 60%;
    padding-left: 10px;
  }

  .product-row {
    display: grid;
    grid-template-columns: 1fr 110px 90px;
    gap: 8px;
    padding: 10px 0;
    border-bottom: 1px solid #f0f0f0;
    cursor: pointer;
    font-size: 0.95em;
  }
  .product-row:hover {
    background: #fafafa;
  }

  .product-name {
    font-weight: 500;
    color: #333;
  }
  .product-price {
    text-align: right;
    color: #555;
  }
  .product-qty input {
    width: 100%;
    padding: 6px;
    border: 1px solid #ccc;
    border-radius: 4px;
    text-align: center;
  }

  .total-box {
    background: #fafafa;
    border: 1px solid #eee;
    padding: 12px 15px;
    border-radius: 6px;
    font-size: 1.1em;
    font-weight: 600;
    color: #2c3e50;
    margin-top: 15px;
  }

  /* 우측 상세 */
  .detail-title {
    font-size: 1.4em;
    font-weight: 600;
    margin-bottom: 15px;
    color: #2c3e50;
  }

  .slider {
    width: 100%;
    height: 260px;
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 15px;
  }
  .slide-img {
    width: 100%;
    height: 260px;
    object-fit: cover;
    display: none;
  }
  .slide-img.active {
    display: block;
  }

  .slider-controls {
    text-align: center;
    margin-bottom: 10px;
  }
  .slider-controls button {
    padding: 5px 10px;
    margin: 0 3px;
    border: 1px solid #ccc;
    background: #fff;
    cursor: pointer;
    font-size: 0.85em;
  }

  .detail-desc {
    background: #fafafa;
    padding: 15px;
    min-height: 80px;
    border-radius: 6px;
    line-height: 1.6;
    font-size: 0.95em;
    color: #555;
    margin-bottom: 15px;
  }

  .detail-price {
    font-size: 1.1em;
    margin-bottom: 8px;
  }
  .detail-subtotal {
    font-size: 1em;
    margin-bottom: 12px;
    color: #444;
  }

  .detail-qty-wrap {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 15px;
  }
  .detail-qty-wrap input {
    width: 80px;
    padding: 6px;
    border: 1px solid #ccc;
    border-radius: 4px;
    text-align: center;
  }

  button[type="submit"] {
    width: 100%;
    padding: 16px;
    margin-top: 35px;
    background: #2c3e50;
    color: #fff;
    border: none;
    border-radius: 6px;
    font-size: 1.05em;
    cursor: pointer;
  }
  button[type="submit"]:hover {
    background: #fff;
    color: #2c3e50;
    border: 1px solid #2c3e50;
  }

  .hidden { display: none; }
</style>
</head>

<body>
<div class="page-wrapper">

  <h1>연말 할인 주문서</h1>
  <h4>감사의 마음을 담아 특별 할인 혜택을 드립니다!</h4>

  <div class="info-line">
    판매 기간: 11월 10일(월) ~ 12월 31일(수) (마감 이후 접수 불가)<br>
    구매 방법: <b>하나은행 183-910001-24105</b> 로 입금<br>
    배송: 결제 확인 후 익일 배송 (주말·공휴일 제외)<br>
    문의: 02-0000-0000 (평일 09:00~18:00)
  </div>

  <!-- FORM START -->
  <form action="https://formspree.io/f/xyzanddw" method="POST" onsubmit="return validateForm();">

    <!-- 1. 주문자 정보 -->
    <h2>1. 주문자 정보</h2>

    <label>주문자 이름</label>
    <input type="text" name="주문자 이름" required>

    <label>소속 회사</label>
    <input type="text" name="소속 회사" required>

    <!-- 2. 구매 상품 -->
    <h2>2. 구매 상품 및 수량</h2>

    <div class="flex-container">
      <!-- LEFT SIDE: 상품 목록 -->
      <div class="product-side">

        <!-- SCENT LINE -->
        <div class="category-title">Scent Line</div>

        <div class="product-row" data-index="0">
          <div class="product-name">Mossy Wood 디퓨저</div>
          <div class="product-price">66,500원</div>
          <div class="product-qty"><input type="number" name="Mossy Wood 디퓨저" class="qty-input" data-index="0" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="1">
          <div class="product-name">Mossy Wood 캔들</div>
          <div class="product-price">65,100원</div>
          <div class="product-qty"><input type="number" name="Mossy Wood 캔들" class="qty-input" data-index="1" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="2">
          <div class="product-name">Mossy Wood 룸스프레이</div>
          <div class="product-price">61,600원</div>
          <div class="product-qty"><input type="number" name="Mossy Wood 룸스프레이" class="qty-input" data-index="2" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="3">
          <div class="product-name">Mint Forest 디퓨저</div>
          <div class="product-price">66,500원</div>
          <div class="product-qty"><input type="number" name="Mint Forest 디퓨저" class="qty-input" data-index="3" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="4">
          <div class="product-name">Mint Forest 캔들</div>
          <div class="product-price">65,100원</div>
          <div class="product-qty"><input type="number" name="Mint Forest 캔들" class="qty-input" data-index="4" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="5">
          <div class="product-name">Mint Forest 룸스프레이</div>
          <div class="product-price">61,600원</div>
          <div class="product-qty"><input type="number" name="Mint Forest 룸스프레이" class="qty-input" data-index="5" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="6">
          <div class="product-name">White Bloom 디퓨저</div>
          <div class="product-price">66,500원</div>
          <div class="product-qty"><input type="number" name="White Bloom 디퓨저" class="qty-input" data-index="6" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="7">
          <div class="product-name">White Bloom 캔들</div>
          <div class="product-price">65,100원</div>
          <div class="product-qty"><input type="number" name="White Bloom 캔들" class="qty-input" data-index="7" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="8">
          <div class="product-name">White Bloom 룸스프레이</div>
          <div class="product-price">61,600원</div>
          <div class="product-qty"><input type="number" name="White Bloom 룸스프레이" class="qty-input" data-index="8" min="0" value="0"></div>
        </div>

        <!-- BEDDING LINE -->
        <div class="category-title">Bedding Line</div>

        <div class="product-row" data-index="9">
          <div class="product-name">구스다운 킹 이불세트</div>
          <div class="product-price">1,050,000원</div>
          <div class="product-qty"><input type="number" name="구스다운 킹 이불세트" class="qty-input" data-index="9" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="10">
          <div class="product-name">구스다운 퀸 이불세트</div>
          <div class="product-price">1,008,000원</div>
          <div class="product-qty"><input type="number" name="구스다운 퀸 이불세트" class="qty-input" data-index="10" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="11">
          <div class="product-name">구스다운 싱글 이불세트</div>
          <div class="product-price">840,000원</div>
          <div class="product-qty"><input type="number" name="구스다운 싱글 이불세트" class="qty-input" data-index="11" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="12">
          <div class="product-name">베드시트 킹</div>
          <div class="product-price">189,000원</div>
          <div class="product-qty"><input type="number" name="베드시트 킹" class="qty-input" data-index="12" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="13">
          <div class="product-name">베드시트 퀸</div>
          <div class="product-price">175,000원</div>
          <div class="product-qty"><input type="number" name="베드시트 퀸" class="qty-input" data-index="13" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="14">
          <div class="product-name">베드시트 싱글</div>
          <div class="product-price">147,000원</div>
          <div class="product-qty"><input type="number" name="베드시트 싱글" class="qty-input" data-index="14" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="15">
          <div class="product-name">구스다운 프리미엄 베개세트</div>
          <div class="product-price">368,000원</div>
          <div class="product-qty"><input type="number" name="구스다운 프리미엄 베개세트" class="qty-input" data-index="15" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="16">
          <div class="product-name">구스다운 킹 베개세트</div>
          <div class="product-price">316,000원</div>
          <div class="product-qty"><input type="number" name="구스다운 킹 베개세트" class="qty-input" data-index="16" min="0" value="0"></div>
        </div>

        <!-- TOWEL LINE -->
        <div class="category-title">Towel Line</div>

        <div class="product-row" data-index="17">
          <div class="product-name">배스로브</div>
          <div class="product-price">129,500원</div>
          <div class="product-qty"><input type="number" name="배스로브" class="qty-input" data-index="17" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="18">
          <div class="product-name">배스 타월 세트(2개)</div>
          <div class="product-price">80,500원</div>
          <div class="product-qty"><input type="number" name="배스 타월 세트" class="qty-input" data-index="18" min="0" value="0"></div>
        </div>

        <div class="product-row" data-index="19">
          <div class="product-name">페이스 타월 세트(3개)</div>
          <div class="product-price">63,200원</div>
          <div class="product-qty"><input type="number" name="페이스 타월 세트" class="qty-input" data-index="19" min="0" value="0"></div>
        </div>

        <!-- GOURMET LINE -->
        <div class="category-title">Gourmet Line</div>

        <div class="product-row" data-index="20">
          <div class="product-name">버터 치킨 커리(난 추가 증정)</div>
          <div class="product-price">27,300원</div>
          <div class="product-qty"><input type="number" name="버터 치킨 커리" class="qty-input" data-index="20" min="0" value="0"></div>
        </div>

        <div class="total-box" id="grandTotalBox">
          주문 총액: <span id="grandTotal">0</span>원
        </div>
        <input type="hidden" name="주문 총액" id="grandTotalInput" value="0">

      </div>

      <!-- RIGHT SIDE: 상품 상세 미리보기 -->
      <div class="preview-side">
        <div class="detail-title" id="detailTitle">상품을 선택해주세요</div>

        <div class="slider">
          <img id="img1" class="slide-img active" src="https://via.placeholder.com/600x260?text=상품+이미지+1">
          <img id="img2" class="slide-img" src="https://via.placeholder.com/600x260?text=상품+이미지+2">
        </div>

        <div class="slider-controls">
          <button type="button" onclick="showSlide(1)">이미지 1</button>
          <button type="button" onclick="showSlide(2)">이미지 2</button>
        </div>

        <div class="detail-desc" id="detailDesc">
          상품을 클릭하시면 상세 정보가 여기에 표시됩니다.
        </div>

        <div class="detail-price">
          단가: <span id="detailPrice">0</span>원
        </div>

        <div class="detail-subtotal">
          현재 상품 금액: <span id="detailSubtotal">0</span>원
        </div>

        <div class="detail-qty-wrap">
          <span>수량</span>
          <input type="number" id="detailQty" min="0" value="0">
        </div>
      </div>
    </div>

    <!-- 배송 정보 -->
    <h2>3. 배송 정보</h2>
    <label>수취인 이름</label>
    <input type="text" name="수취인 이름" required>

    <label>수취인 전화번호</label>
    <input type="text" name="수취인 전화번호" required>

    <label>수취인 주소</label>
    <input type="text" name="수취인 주소" required>

    <!-- 결제 방식 -->
    <h2>4. 결제 방식</h2>
    <label>결제 방식 선택</label>
    <select name="결제 방식" id="paySelect" required>
      <option value="">선택해 주세요</option>
      <option value="계좌이체">계좌이체</option>
      <option value="카드결제">카드결제</option>
    </select>

    <div id="bankArea" class="hidden">
      <label>입금자명</label>
      <input type="text" name="입금자명">

      <label>입금 금액</label>
      <input type="number" name="입금 금액" id="depositAmount" min="0">
    </div>

    <div id="cardArea" class="hidden">
      <label>결제 링크 받을 연락처</label>
      <input type="text" name="카드결제 연락처">
    </div>

    <!-- 증빙 -->
    <h2>5. 현금영수증 / 세금계산서</h2>
    <label>발행 여부</label>
    <select name="증빙 선택" id="taxSelect">
      <option value="">선택 안 함</option>
      <option value="현금영수증">현금영수증(개인)</option>
      <option value="세금계산서">세금계산서(기업)</option>
    </select>

    <div id="taxArea" class="hidden">
      <label>발행 번호</label>
      <input type="text" name="증빙 발행 번호">
    </div>

    <button type="submit">주문서 제출하기</button>
  </form>
</div>

<script>
  /* --- 상품 데이터 --- */
  const products = [
    { name: "Mossy Wood 디퓨저", price: 66500 },
    { name: "Mossy Wood 캔들", price: 65100 },
    { name: "Mossy Wood 룸스프레이", price: 61600 },
    { name: "Mint Forest 디퓨저", price: 66500 },
    { name: "Mint Forest 캔들", price: 65100 },
    { name: "Mint Forest 룸스프레이", price: 61600 },
    { name: "White Bloom 디퓨저", price: 66500 },
    { name: "White Bloom 캔들", price: 65100 },
    { name: "White Bloom 룸스프레이", price: 61600 },

    { name: "구스다운 킹 이불세트", price: 1050000 },
    { name: "구스다운 퀸 이불세트", price: 1008000 },
    { name: "구스다운 싱글 이불세트", price: 840000 },

    { name: "베드시트 킹", price: 189000 },
    { name: "베드시트 퀸", price: 175000 },
    { name: "베드시트 싱글", price: 147000 },

    { name: "구스다운 프리미엄 베개세트", price: 368000 },
    { name: "구스다운 킹 베개세트", price: 316000 },

    { name: "배스로브", price: 129500 },
    { name: "배스 타월 세트", price: 80500 },
    { name: "페이스 타월 세트", price: 63200 },

    { name: "버터 치킨 커리", price: 27300 }
  ];

  const qtyInputs = document.querySelectorAll('.qty-input');

  let selectedIndex = 0;

  function selectProduct(index) {
    selectedIndex = index;
    const p = products[index];

    document.getElementById("detailTitle").innerText = p.name;
    document.getElementById("detailPrice").innerText = p.price.toLocaleString();
    document.getElementById("detailDesc").innerHTML =
      "이 상품의 상세 설명(더미 텍스트)이 들어갈 자리입니다.<br>나중에 실제 내용을 입력하시면 됩니다.";

    let curQty = parseInt(qtyInputs[index].value) || 0;
    document.getElementById("detailQty").value = curQty;
    document.getElementById("detailSubtotal").innerText = (p.price * curQty).toLocaleString();

    document.getElementById("img1").src = "https://via.placeholder.com/600x260?text=" +
      encodeURIComponent(p.name + " 이미지 1");
    document.getElementById("img2").src = "https://via.placeholder.com/600x260?text=" +
      encodeURIComponent(p.name + " 이미지 2");

    showSlide(1);
  }

  function calcTotal() {
    let total = 0;
    qtyInputs.forEach((input, i) => {
      const q = parseInt(input.value) || 0;
      total += q * products[i].price;
    });
    document.getElementById("grandTotal").innerText = total.toLocaleString();
    document.getElementById("grandTotalInput").value = total;

    const curQty = parseInt(qtyInputs[selectedIndex].value) || 0;
    document.getElementById("detailSubtotal").innerText = (curQty * products[selectedIndex].price).toLocaleString();
  }

  document.querySelectorAll('.product-row').forEach(row => {
    row.addEventListener('click', () => {
      const idx = parseInt(row.getAttribute('data-index'));
      selectProduct(idx);
    });
  });

  qtyInputs.forEach(input => {
    input.addEventListener('input', () => {
      const idx = parseInt(input.getAttribute('data-index'));
      if (idx === selectedIndex) {
        document.getElementById("detailQty").value = input.value;
      }
      calcTotal();
    });
  });

  document.getElementById("detailQty").addEventListener('input', () => {
    qtyInputs[selectedIndex].value = document.getElementById("detailQty").value;
    calcTotal();
  });

  function showSlide(n) {
    document.getElementById("img1").classList.toggle("active", n === 1);
    document.getElementById("img2").classList.toggle("active", n === 2);
  }

  /* 결제 방식 조건부 표시 */
  const paySelect = document.getElementById("paySelect");
  const bankArea  = document.getElementById("bankArea");
  const cardArea  = document.getElementById("cardArea");

  paySelect.addEventListener("change", () => {
    bankArea.classList.add("hidden");
    cardArea.classList.add("hidden");
    if (paySelect.value === "계좌이체") bankArea.classList.remove("hidden");
    if (paySelect.value === "카드결제") cardArea.classList.remove("hidden");
  });

  /* 증빙 조건부 */
  const taxSelect = document.getElementById("taxSelect");
  const taxArea   = document.getElementById("taxArea");

  taxSelect.addEventListener("change", () => {
    taxArea.classList.add("hidden");
    if (taxSelect.value !== "") taxArea.classList.remove("hidden");
  });

  function validateForm() {
    const total = parseInt(document.getElementById("grandTotalInput").value);
    if (total <= 0) {
      alert("최소 한 개 이상의 상품을 선택해 주세요.");
      return false;
    }

    if (paySelect.value === "계좌이체") {
      const depositor = document.querySelector('input[name="입금자명"]').value.trim();
      const depositAmount = parseInt(document.getElementById("depositAmount").value);

      if (!depositor) {
        alert("계좌이체 선택 시 입금자명을 입력해야 합니다.");
        return false;
      }
      if (depositAmount !== total) {
        alert("입금 금액이 주문 총액과 일치하지 않습니다.");
        return false;
      }
    }

    if (paySelect.value === "카드결제") {
      const cardPhone = document.querySelector('input[name="카드결제 연락처"]').value.trim();
      if (!cardPhone) {
        alert("카드 결제 링크를 받을 연락처를 입력해 주세요.");
        return false;
      }
    }
    return true;
  }

  /* 페이지 진입 시 첫 상품 자동 선택 */
  selectProduct(0);
  calcTotal();
</script>
</body>
</html>
